!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||i(t)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){return function(t){if(Array.isArray(t))return n(t)}(t)||i(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o="dual-listbox__title",r="dual-listbox__item",d="dual-listbox__search",c="dual-listbox__item--selected",u="down",h=function(){"use strict";function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,i),this.setDefaults(),this.selected=[],this.available=[],i.isDomElement(e)?this.select=e:this.select=document.querySelector(e),this._initOptions(n),this._initReusableElements(),this._splitOptions(this.select.options),void 0!==n.options&&this._splitOptions(n.options),this._buildDualListbox(this.select.parentNode),this._addActions(),this.sortable&&this._initializeSortButtons(),this.redraw()}var n,s,h;return n=i,s=[{key:"setDefaults",value:function(){this.addEvent=null,this.removeEvent=null,this.availableTitle="Available options",this.selectedTitle="Selected options",this.showAddButton=!0,this.addButtonText="add",this.showRemoveButton=!0,this.removeButtonText="remove",this.showAddAllButton=!0,this.addAllButtonText="add all",this.showRemoveAllButton=!0,this.removeAllButtonText="remove all",this.searchPlaceholder="Search",this.sortable=!1,this.upButtonText="up",this.downButtonText="down"}},{key:"addEventListener",value:function(t,e){this.dualListbox.addEventListener(t,e)}},{key:"addSelected",value:function(t){var e=this.available.indexOf(t);if(e>-1){var i=this;this.available.splice(e,1),this.selected.push(t),this._selectOption(t.dataset.id),this.redraw(),setTimeout((function(){var e=document.createEvent("HTMLEvents");e.initEvent("added",!1,!0),e.addedElement=t,i.dualListbox.dispatchEvent(e)}),0)}}},{key:"redraw",value:function(){this.updateAvailableListbox(),this.updateSelectedListbox()}},{key:"removeSelected",value:function(t){var e=this.selected.indexOf(t);if(e>-1){var i=this;this.selected.splice(e,1),this.available.push(t),this._deselectOption(t.dataset.id),this.redraw(),setTimeout((function(){var e=document.createEvent("HTMLEvents");e.initEvent("removed",!1,!0),e.removedElement=t,i.dualListbox.dispatchEvent(e)}),0)}}},{key:"searchLists",value:function(t,e){for(var i=e.querySelectorAll(".".concat(r)),n=t.toLowerCase(),s=0;s<i.length;s++){var a=i[s];-1===a.textContent.toLowerCase().indexOf(n)?a.style.display="none":a.style.display="list-item"}}},{key:"updateAvailableListbox",value:function(){this._updateListbox(this.availableList,this.available)}},{key:"updateSelectedListbox",value:function(){this._updateListbox(this.selectedList,this.selected)}},{key:"_actionAllSelected",value:function(t){var e=this;t.preventDefault(),this.available.filter((function(t){return"none"!==t.style.display})).forEach((function(t){return e.addSelected(t)}))}},{key:"_updateListbox",value:function(t,e){for(;t.firstChild;)t.removeChild(t.firstChild);for(var i=0;i<e.length;i++){var n=e[i];t.appendChild(n)}}},{key:"_actionItemSelected",value:function(t){t.preventDefault();var e=this.dualListbox.querySelector(".".concat(c));e&&this.addSelected(e)}},{key:"_actionAllDeselected",value:function(t){var e=this;t.preventDefault(),this.selected.filter((function(t){return"none"!==t.style.display})).forEach((function(t){return e.removeSelected(t)}))}},{key:"_actionItemDeselected",value:function(t){t.preventDefault();var e=this.dualListbox.querySelector(".".concat(c));e&&this.removeSelected(e)}},{key:"_actionItemDoubleClick",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(e.preventDefault(),e.stopPropagation()),this.selected.indexOf(t)>-1?this.removeSelected(t):this.addSelected(t)}},{key:"_actionItemClick",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i&&i.preventDefault();for(var n=e.querySelectorAll(".".concat(r)),s=0;s<n.length;s++){var a=n[s];a!==t&&a.classList.remove(c)}t.classList.contains(c)?t.classList.remove(c):t.classList.add(c)}},{key:"_addActions",value:function(){this._addButtonActions(),this._addSearchActions()}},{key:"_addButtonActions",value:function(){var t=this;this.add_all_button.addEventListener("click",(function(e){return t._actionAllSelected(e)})),this.add_button.addEventListener("click",(function(e){return t._actionItemSelected(e)})),this.remove_button.addEventListener("click",(function(e){return t._actionItemDeselected(e)})),this.remove_all_button.addEventListener("click",(function(e){return t._actionAllDeselected(e)}))}},{key:"_addClickActions",value:function(t){var e=this;return t.addEventListener("dblclick",(function(i){return e._actionItemDoubleClick(t,i)})),t.addEventListener("click",(function(i){return e._actionItemClick(t,e.dualListbox,i)})),t}},{key:"_addSearchActions",value:function(){var t=this;this.search_left.addEventListener("change",(function(e){return t.searchLists(e.target.value,t.availableList)})),this.search_left.addEventListener("keyup",(function(e){return t.searchLists(e.target.value,t.availableList)})),this.search_right.addEventListener("change",(function(e){return t.searchLists(e.target.value,t.selectedList)})),this.search_right.addEventListener("keyup",(function(e){return t.searchLists(e.target.value,t.selectedList)}))}},{key:"_buildDualListbox",value:function(t){this.select.style.display="none",this.dualListBoxContainer.appendChild(this._createList(this.search_left,this.availableListTitle,this.availableList)),this.dualListBoxContainer.appendChild(this.buttons),this.dualListBoxContainer.appendChild(this._createList(this.search_right,this.selectedListTitle,this.selectedList)),this.dualListbox.appendChild(this.dualListBoxContainer),t.insertBefore(this.dualListbox,this.select)}},{key:"_createList",value:function(t,e,i){var n=document.createElement("div");return n.appendChild(t),n.appendChild(e),n.appendChild(i),n}},{key:"_createButtons",value:function(){this.buttons=document.createElement("div"),this.buttons.classList.add("dual-listbox__buttons"),this.add_all_button=document.createElement("button"),this.add_all_button.innerHTML=this.addAllButtonText,this.add_button=document.createElement("button"),this.add_button.innerHTML=this.addButtonText,this.remove_button=document.createElement("button"),this.remove_button.innerHTML=this.removeButtonText,this.remove_all_button=document.createElement("button"),this.remove_all_button.innerHTML=this.removeAllButtonText;var t={showAddAllButton:this.add_all_button,showAddButton:this.add_button,showRemoveButton:this.remove_button,showRemoveAllButton:this.remove_all_button};for(var e in t)if(e){var i=this[e],n=t[e];n.setAttribute("type","button"),n.classList.add("dual-listbox__button"),i&&this.buttons.appendChild(n)}}},{key:"_createListItem",value:function(t){var e=document.createElement("li");return e.classList.add(r),e.innerHTML=t.text,e.dataset.id=t.value,this._addClickActions(e),e}},{key:"_createSearchLeft",value:function(){this.search_left=document.createElement("input"),this.search_left.classList.add(d),this.search_left.placeholder=this.searchPlaceholder}},{key:"_createSearchRight",value:function(){this.search_right=document.createElement("input"),this.search_right.classList.add(d),this.search_right.placeholder=this.searchPlaceholder}},{key:"_deselectOption",value:function(t){for(var e=this.select.options,i=0;i<e.length;i++){var n=e[i];n.value===t&&(n.selected=!1,n.removeAttribute("selected"))}this.removeEvent&&this.removeEvent(t)}},{key:"_initOptions",value:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}},{key:"_initReusableElements",value:function(){this.dualListbox=document.createElement("div"),this.dualListbox.classList.add("dual-listbox"),this.select.id&&this.dualListbox.classList.add(this.select.id),this.dualListBoxContainer=document.createElement("div"),this.dualListBoxContainer.classList.add("dual-listbox__container"),this.availableList=document.createElement("ul"),this.availableList.classList.add("dual-listbox__available"),this.selectedList=document.createElement("ul"),this.selectedList.classList.add("dual-listbox__selected"),this.availableListTitle=document.createElement("div"),this.availableListTitle.classList.add(o),this.availableListTitle.innerText=this.availableTitle,this.selectedListTitle=document.createElement("div"),this.selectedListTitle.classList.add(o),this.selectedListTitle.innerText=this.selectedTitle,this._createButtons(),this._createSearchLeft(),this._createSearchRight()}},{key:"_selectOption",value:function(t){for(var e=this.select.options,i=0;i<e.length;i++){var n=e[i];n.value===t&&(n.selected=!0,n.setAttribute("selected",""))}this.addEvent&&this.addEvent(t)}},{key:"_splitOptions",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];i.isDomElement(n)?this._addOption({text:n.innerHTML,value:n.value,selected:n.attributes.selected}):this._addOption(n)}}},{key:"_addOption",value:function(t){var e=this._createListItem(t);t.selected?this.selected.push(e):this.available.push(e)}},{key:"_initializeSortButtons",value:function(){var t=this,e=document.createElement("button");e.classList.add("dual-listbox__button"),e.innerText=this.upButtonText,e.addEventListener("click",(function(e){return t._onSortButtonClick(e,"up")}));var i=document.createElement("button");i.classList.add("dual-listbox__button"),i.innerText=this.downButtonText,i.addEventListener("click",(function(e){return t._onSortButtonClick(e,u)}));var n=document.createElement("div");n.classList.add("dual-listbox__buttons"),n.appendChild(e),n.appendChild(i),this.dualListBoxContainer.appendChild(n)}},{key:"_onSortButtonClick",value:function(t,e){t.preventDefault();var i=a(this._findSelected(e),2),n=i[0],s=i[1];n!==s&&(this._sortUnderlyingSelectOptions(n,s),this._sortSelected(n,s),this.redraw())}},{key:"_findSelected",value:function(t){var e=this.selected.findIndex((function(t){return t.classList.contains("dual-listbox__item--selected")})),i=e;return"up"===t&&e>0?i-=1:u===t&&e<this.selected.length-1&&(i+=1),[e,i]}},{key:"_sortUnderlyingSelectOptions",value:function(t,e){var i=this.selected[t].getAttribute("data-id"),n=this.selected[e].getAttribute("data-id"),s=l(this.select.children).findIndex((function(t){return t.value===i})),a=l(this.select.children).findIndex((function(t){return t.value===n})),o=this.select.children[s];o.remove(),this.select.insertBefore(o,this.select.children[a])}},{key:"_sortSelected",value:function(t,e){var i=this.selected[t];this.selected.splice(t,1),this.selected.splice(e,0,i)}}],h=[{key:"isDomElement",value:function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}}],s&&e(n.prototype,s),h&&e(n,h),i}();window.DualListbox=h}();
//# sourceMappingURL=dual-listbox.js.map
